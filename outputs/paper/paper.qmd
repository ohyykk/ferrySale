---
title: "Analyzing Toronto Island Ferry Ticket Counts"
subtitle: "A Statistical Exploration of Sales Trends"
author: 
  - Yingke He
thanks: "Code and data are available at: https://github.com/ohyykk/ferrySale.git"
date: 09-23-2024
date-format: long
abstract: "This study examines the ticket redemption and sales counts for the Toronto Island Ferry. We analyze time-based trends, relationships between sales and redemptions, and develop statistical models to predict ferry ticket usage. The results provide insights into usage patterns, highlight operational considerations, and suggest avenues for future research. Our analysis reveals distinct seasonal peaks and troughs in ferry usage, correlating with tourism and weather conditions. Furthermore, the study identifies discrepancies between ticket sales and redemptions, suggesting potential improvements in ticketing strategies and resource allocation."
format: pdf
number-sections: true
# The toc parameter used to create a table of contents was obtained from
# Quarto documentation:
# https://quarto.org/docs/reference/formats/pdf.html
toc: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

#install.packages("here")

library(tidyverse)
library(opendatatoronto)
library(here)
library(ggplot2)

```


# Introduction

The Toronto Island Ferry system has long been an essential transportation link between downtown Toronto and the Toronto Islands, serving both residents and tourists. With roots tracing back to the early days of the city’s development, the ferry system reflects both historical and contemporary mobility patterns in the region. Historical accounts provided by @varga1987toronto highlight the evolution of the Toronto Islands' natural environment and its significance to the area’s biodiversity and recreation. Additionally, the potential role of ferries in urban transit systems, as explored by @kopystynski1979potential, underscores their importance in enhancing urban mobility and connectivity.

This paper aims to analyze the ticket counts for the Toronto Island Ferry, exploring trends in ticket redemption and sales, and drawing connections between historical developments and current usage patterns. By integrating insights from both historical and modern perspectives, including contemporary studies on ferry commuting from @roseman2020precarious, this analysis seeks to provide a comprehensive understanding of the factors influencing ferry usage. The remainder of this paper is structured as follows: Section 2 describes the dataset used for analysis, Section 3 outlines the modeling approach, Section 4 presents the results, and Section 5 discusses the implications of the findings and potential directions for future research. We use @citeR and @rohan, and We use @sec-data to reference the data section.



# Data {#sec-data}

## Overview {#sec-data-overview}

The dataset used in this analysis is the 2024 installment of “Toronto Island Ferry Ticket Counts” obtained from OpenDataToronto (@varga1987toronto). This dataset contains information about the number of ferry tickets redeemed and sold for the Toronto Island Ferry system, which serves as a critical transportation link between downtown Toronto and the Toronto Islands.

The dataset is updated regularly and includes time-stamped entries for ticket redemptions and sales, allowing for a detailed analysis of ferry usage patterns throughout the year. The data is considered “open data” and can be utilized for various analytical purposes, provided that appropriate attribution is given..

The primary variables included in this analysis are:

**Timestamp**: The date and time when each ticket count was recorded.  
**Redemption.Count**: The number of ferry tickets redeemed during the specified time period.  
**Sales.Count**: The number of ferry tickets sold during the specified time period.  

The data was processed and analyzed using the R programming language (@citeR). The tidyverse (@wickham2019tidyverse) and opendatatoronto packages were employed to download, clean, and prepare the dataset for analysis. The resulting cleaned dataset was then utilized to generate the visualizations and statistical analyses presented in this paper using a collection of libraries which included the following packages:

- ggplot2 [@wickham2016ggplot2]
- knitr [@xie2023knitr]
- readr [@wickham2023readr]

## Results {#sec-data-resultsk}

```{r}
#| echo: false
#| warning: false
#| message: false
#| results: "hide"

#### Loading the Cleaned Dataset ####
marriage_licence_packages <- search_packages("Toronto Island Ferry Ticket Counts")
marriage_licence_resources <- marriage_licence_packages %>%
  list_package_resources()

# Retrieve the dataset
marriage_licence_statistics <- marriage_licence_resources[2,] %>%
  get_resource()

# Read the cleaned data
data <- read_csv(file = here("outputs/data/cleaned_data.csv"), 
                 show_col_types = FALSE)

```

The table @tbl-cleaned_data provides a detailed snapshot of the Toronto Island Ferry ticket transactions for a specific time period. It includes a unique ID for each transaction, the Time at which each transaction occurred, the number of Tickets Redeemed, the number of Tickets Sold, and the Date of the transaction.
```{r}
#| label: tbl-cleaned_data
#| fig-cap: Sample Cleaned Data
#| echo: false


# Load necessary libraries
library(knitr)
library(readr)

# Load the cleaned data from the CSV file (adjust the path as needed)
data <- read_csv(file = here("outputs/data/cleaned_data.csv"), show_col_types = FALSE)

# Select a segment of the data, e.g., rows 51 to 60 for illustration
segment_data <- data[51:60, ]

# Modify the data for display - create new columns for ID, Time, and Date
segment_data <- segment_data %>%
  mutate(ID = row_number() + 50,                          # Create a new ID column starting from 51
         Time = format(as.POSIXct(Timestamp), "%H:%M:%S"), # Extract Time from Timestamp
         Date = format(as.POSIXct(Timestamp), "%Y-%m-%d")) # Extract Date from Timestamp

# Select only the required columns for display in the table
table_data <- segment_data[, c("ID", "Time", "Redemption.Count", "Sales.Count", "Date")]

# Create the table using kable
kable(table_data, col.names = c('ID', 'Time', 'Tickets Redeemed', 'Tickets Sold', 'Date'), 
      align = "c", 
      caption = "Sample of cleaned Ferry Ticket Counts Data")


```

This table shows the typical flucuations in ticket sales and redemptions throughout the day. For example, during late evening hours, we observe varying ticket redemption and sales patterns, which may correspond to changes in passenger demand as the ferry service approaches the end of its operational hours. 


## Redemption and Sales Counts Over Time

To gain an initial insight into the dataset, we plotted the trends in ticket redemption and sales counts over time. The line plot shown in @fig-linePlot provides a clear visual representation of these trends, serving as a starting point for deeper analysis of ferry usage patterns.

The dataset used in this analysis includes timestamped records of ticket redemptions and sales for the Toronto Island Ferry system, offering a time series perspective on ferry usage. The plot in @fig-linePlot specifically highlights how these counts fluctuate over time, reflecting the flow of passenger demand. The y-axis for redemption counts is displayed in blue, while the y-axis for sales counts is displayed in green, but inverted to better show their correlation.


```{r}
#| label: fig-linePlot
#| fig-cap: Redemption and Sales Counts Over Time
#| echo: false

# Calculate the range for both y-axes to have a symmetrical appearance
y_max <- max(max(data$Sales.Count), max(data$Redemption.Count))

# Create the plot
ggplot(data, aes(x = Timestamp)) +
  # Line plot for Redemption Count
  geom_line(aes(y = Redemption.Count), color = "#F7C4C1", linewidth = 1.2) +
  # Line plot for Sales Count (inverted)
  geom_line(aes(y = -Sales.Count), color = "#81B0B2", linewidth = 1.2) +
  
  # Set y-axis limits symmetrically and apply the secondary axis
  scale_y_continuous(limits = c(-y_max, y_max),
                     breaks = seq(-y_max, y_max, by = 1000),
                     sec.axis = sec_axis(~ -., 
                                         name = "Sales Count",
                                         breaks = seq(y_max, -y_max, by = -1000))) +
  
  # Add plot labels
  labs(
    title = "Redemption and Sales Count Over Time",
    y = "Redemption Count",  # Y-axis for Redemption Count
    x = "Timestamp"          # X-axis for Timestamp
  ) +
  
  # Apply minimal theme and customize axis titles
  theme_minimal() +
  theme(
    # Color the right-side axis title (Sales Count) to match the orange line
    axis.title.y.right = element_text(color = "#F7C4C1", size = 12),
    # Color the left-side axis title (Redemption Count) to match the pink line
    axis.title.y.left = element_text(color = "#81B0B2", size = 12),
    # Center the title and increase font size
    plot.title = element_text(hjust = 0.5, size = 16, face = "bold")
  )
```

As shown in @fig-linePlot, the x-axis denotes the timestamps of each record, while the y-axis represents the number of tickets processed. The blue line corresponds to the redemption counts, and the green line represents the sales counts, plotted inversely to emphasize the contrast between the two trends. The symmetrical y-axis allows for a clearer comparison between peaks and troughs in both counts over time.

The plot reveals significant variations in ferry usage over time. We observe several peaks in both redemption and sales counts, likely aligning with periods of high activity, such as weekends, holidays, or the peak tourist season during the summer months. These spikes suggest increased demand during favorable weather or event-driven occasions. Conversely, the noticeable dips in the graph may correspond to regular weekdays or off-season times, indicating lower ferry usage during these periods. This information is valuable for understanding the temporal dynamics of ferry operations and can inform better resource management and scheduling.


## Redemption vs Sales Count 


The scatter plot in @fig-scatterPlot is designed to explore the relationship between ticket redemption and sales counts for the Toronto Island Ferry system. This visualization allows us to understand whether there is a correlation between the number of tickets sold and the number of tickets redeemed during the same time period.
```{r}
#| label: fig-scatterPlot
#| fig-cap: Scatter Plot of Redemption vs Sales Count
#| echo: false
#| warning: false
#| message: false

ggplot(data, aes(x = Sales.Count, y = Redemption.Count)) +
  geom_point(alpha = 0.7, color = "#93445e") +
  labs(
    title = "Scatterplot: Redemption Count vs Sales Count",
    x = "Sales Count",
    y = "Redemption Count"
  ) +
  xlim(0, max(data$Sales.Count) * 1.1) +  # Adding some space to the x-axis
  ylim(0, max(data$Redemption.Count) * 1.1) +  # Adding some space to the y-axis
  theme_minimal() +
  theme(
    plot.title = element_text(hjust = 0.5)  # Center the title
  )
```

@fig-scatterPlot displays each data point as a purple dot, where the y-axis represents the count of tickets redeemed, and the x-axis denotes the count of tickets sold. This plot provides insight into the degree of alignment between ticket sales and actual usage (redemptions).

The scatter plot shows how ticket sales and redemptions relate to each other over time. If most points lie along a diagonal line, it indicates a strong positive correlation between the two variables, suggesting that a high number of tickets sold typically corresponds to a high number of tickets redeemed. This scenario could imply effective ticket utilization, where most purchased tickets are being used for travel.

\newpage

## Side by Side Comparison

The box plot shown in @fig-boxPlot provides a summary of the distribution of ticket sales and redemption counts for the Toronto Island Ferry system. This visualization helps to identify the spread, central tendency, and any potential outliers in the data for both categories, offering a comparative view of the sales and redemption behaviors.
```{r}
#| label: fig-boxPlot
#| fig-cap: Box Plot of Sales and Redemption Counts
#| echo: false
#| warning: false
#| message: false

ggplot(data, aes(x = "Sales Count", y = Sales.Count, fill = "Sales Count")) +
  geom_boxplot(alpha = 0.5) +
  geom_boxplot(aes(x = "Redemption Count", y = Redemption.Count, fill = "Redemption Count"), alpha = 0.5) +
  scale_fill_manual(values = c("Sales Count" = "lightgreen", "Redemption Count" = "lightblue")) +
  labs(title = "Box Plot of Sales and Redemption Counts",
       x = "Category",
       y = "Count",
       fill = "Legend") +
  theme_minimal() +
  theme(
    legend.position = "top",
    plot.title = element_text(hjust = 0.5)  # Center the title
  )
```
@fig-boxPlot illustrates two box plots side by side: one for sales counts (light blue) and the other for redemption counts (light green). Each box plot provides a visual summary of the data distribution, highlighting the median, quartiles, and any outliers for each category.

The box plots reveal key differences and similarities in the distribution of sales and redemption counts. The horizontal line inside each box represents the median count, providing a measure of central tendency. The top and bottom edges of the box denote the interquartile range (IQR), which captures the middle 50% of the data. The "whiskers" extending from the box show the range of values within 1.5 times the IQR from the first and third quartiles, while any points beyond these whiskers are considered outliers.


# Discussion {#sec-discussion}


In Section 2.2, the time series analysis of ticket sales and redemptions (Figure @fig-linePlot) revealed clear seasonal patterns, with pronounced peaks during the warmer months. This trend aligns with the historical and cultural significance of the Toronto Islands as a recreational destination, as documented by @varga1987toronto. The increased demand during these periods suggests that the ferry system plays a crucial role in supporting both tourism and local leisure activities. These seasonal fluctuations underscore the need for effective resource management and scheduling to accommodate surges in passenger volume during peak times.


The scatter plot analysis in Section 2.3 (Figure @fig-scatterPlot) demonstrated a generally positive correlation between ticket sales and redemptions, suggesting that most tickets purchased are used. However, discrepancies where sales exceed redemptions could be linked to bulk purchases, advanced ticket sales, or unredeemed tickets due to factors like adverse weather conditions. This observation is consistent with the analysis by @kopystynski1979potential, who highlighted the complexities of integrating ferry systems into urban transit networks. Understanding these discrepancies is critical for improving ticketing policies and service offerings to better match supply with demand.


The box plot analysis in Section 2.4 (Figure @fig-boxPlot) provided a comparative view of the variability in sales and redemption counts. The presence of outliers, particularly during periods of high sales but lower-than-expected redemptions, could indicate anomalies such as large-scale events or disruptions in service. Such variability highlights the need for a more robust system to handle unexpected fluctuations in demand, as well as a deeper understanding of passenger behavior. This finding resonates with the work of @roseman2020precarious, who explored the unpredictable nature of ferry commutes and the challenges faced by passengers in adapting to these changes.

## Weaknesses and next steps
Despite the insights gained, several limitations in the current analysis should be addressed. First, the dataset does not capture the full spectrum of ticket usage behavior, such as the impact of promotional offers or the use of multi-ride passes, which could lead to an overestimation or underestimation of actual ferry usage. Additionally, the analysis does not incorporate external factors such as weather conditions or special events that significantly influence ferry operations, as noted in prior studies like @mcilwraith1984transportation.

To address these limitations, future research should consider incorporating supplementary data sources, such as weather information, event schedules, and passenger feedback, to provide a more comprehensive view of the factors affecting ferry usage. Furthermore, a comparative study with other modes of transportation in Toronto could provide valuable insights into the role of the ferry system within the broader urban transit network. This would help identify areas for service improvement and inform strategies to enhance passenger experience and operational efficiency.

\newpage

\appendix

# Appendix {#sec-appendix}

## Dataset and Graph Sketches {#sec-appendix-sketches}

Sketches depicting both the desired dataset and the graphs generated in this analysis are available in the GitHub Repository.

## Data Cleaning {#sec-appendix-cleaning}

The data cleaning process involved filtering out some of the columns from the raw dataset and renaming some of the data entries for clarity and simplicity.


\newpage

# References {#sec-references}

